<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <title>Pantalla Principal</title>
  <link rel="preload" as="image" href="Imagenes/Pantalla01.jpg">

  <style>
    :root{
      --w: 1080px;
      --h: 1920px;

      /* Ajustes rápidos */
      --idle-ms: 5000;           /* Inactividad antes del paneo (ms) */
      --paneo-duration: 20s;     /* Velocidad del paneo */

      /* Botones imagen */
      --img-radius: 26px;
      --focus-outer: rgba(38,198,255,.35);
      --focus-inner: rgba(255,255,255,.6);

      --btn-w: 450px;
      --btn-h: 300px;

      /* Paneo */
      --paneo-shift: 0px;
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: #000;
      color: #fff;
      font-family: system-ui, sans-serif;
      overflow: hidden;
    }

    .kiosk {
      position: relative;
      width: var(--w);
      height: var(--h);
      margin: 0 auto;
      overflow: hidden;
      background: #000;
    }

    #pantalla-principal {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      background-image: url('Imagenes/Pantalla01.jpg');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      isolation: isolate;
    }

    /* ===== Fondo degradado ANIMADO (opción 3) ===== */
    #pantalla-principal::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(120deg,
        rgba(0, 179, 255, 0.795),
        rgba(34, 109, 170, 0.5),
        rgba(4, 140, 182, 0.25)
      );
      background-size: 200% 200%;
      animation: bgMove 5s ease-in-out infinite;
      z-index: 0;
    }

    @keyframes bgMove {
      0%   { background-position: 0% 50%; }
      50%  { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    /* ============================================== */

    #pantalla-principal > * { position: relative; z-index: 1; }

    .contenedor-logo { display: flex; justify-content: center; width: 100%; margin-top: 200px; }
    .logo-principal { width: 750px; height: auto; }

    .botones {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 40px;
      margin-top: 100px;
      list-style: none;
      padding: 0;
    }

    /* ------------------ BOTONES IMAGEN ------------------ */
    .boton {
      width: var(--btn-w);
      height: var(--btn-h);
      display: flex;
      justify-content: center;
      align-items: center;
      transition: opacity .2s ease;
    }

    .boton > a{
      /* Contenedor clickeable */
      display: block;
      width: 100%;
      height: 100%;
      border-radius: var(--img-radius);
      overflow: hidden; /* asegura que la imagen respete el borde redondeado */
      -webkit-tap-highlight-color: transparent; /* quita flash azul en móviles */
      outline: none;
    }

    .btn-img{
      /* La imagen del logo */
      width: 100%;
      height: 100%;
      object-fit: contain;
      border-radius: var(--img-radius);
      background: transparent;
      display: block;
      transition: transform .2s ease, filter .2s ease;
    }

    /* Hover (solo desktop con mouse) */
    @media (hover:hover) and (pointer:fine){
      .btn-img:hover{
        transform: scale(1.05);      /* zoom leve */
        filter: brightness(1.05);    /* un poco más brillante */
      }
    }

    /* Click/tap */
    .btn-img:active{
      transform: scale(0.95);        /* se encoge un poco */
      filter: brightness(0.9);       /* más oscuro para sensación de "presionado" */
    }

    /* Aro de enfoque accesible (teclado) */
    .boton > a:focus-visible {
      outline: 3px solid var(--focus-inner);
      box-shadow: 0 0 0 6px var(--focus-outer);
    }
    /* ---------------------------------------------------- */

    /* Animación zoom secuencial */
    @keyframes zoomPulse { 0%,100%{transform:scale(1);} 50%{transform:scale(1.08);} }
    .boton-animado { animation: zoomPulse 1.5s ease-in-out infinite; }

    /* Bloqueo temporal */
    .boton.bloqueado a { pointer-events: none; }
    .boton.bloqueado { opacity: 0.6; cursor: default; }

    /* Paneo */
    #paneo-container { position: absolute; inset: 0; overflow: hidden; background: #000; }
    #paneo-img {
      position: absolute; top: 0; left: 0;
      height: var(--h); width: auto; transform: translateX(0);
      will-change: transform;
      animation: paneo var(--paneo-duration) linear infinite;
      animation-direction: alternate;
      user-select: none; -webkit-user-drag: none; pointer-events: none;
    }
    @keyframes paneo { from { transform: translateX(0); } to { transform: translateX(calc(var(--paneo-shift) * -1)); } }

    [hidden] { display: none !important; }

    @media (prefers-reduced-motion: reduce){
      .boton-animado{ animation: none; }
    }
  </style>
</head>
<body>
  <main class="kiosk">
    <section id="pantalla-principal">
      <div class="contenedor-logo">
        <img src="Logos/Promelsa.png" alt="Logo Promelsa" class="logo-principal" decoding="async">
      </div>
      <ul id="lista-botones" class="botones"></ul>
    </section>

    <section id="paneo-container" hidden>
      <img id="paneo-img" src="Imagenes/Pantalla01.jpg" alt="Paneo" decoding="async" />
    </section>
  </main>

  <script>
    const MARCAS = [
      { href: "3m.html",       alt: "Logo 3M",       src: "Logos/3M.png" },
      { href: "ABB.html",      alt: "Logo ABB",      src: "Logos/ABB.png" },
      { href: "CADWELD.html",  alt: "Logo CADWELD",  src: "Logos/CADWELD.png" },
      { href: "CARGILL.html",  alt: "Logo CARGILL",  src: "Logos/CARGILL.png" },
      { href: "COOPER.html",   alt: "Logo COOPER",   src: "Logos/COOPER.png" },
      { href: "EATON.html",    alt: "Logo EATON",    src: "Logos/EATON.png" },
    ];

    (function renderGrid(){
      const ul = document.getElementById('lista-botones');
      const frag = document.createDocumentFragment();

      MARCAS.forEach(({href, alt, src}, i) => {
        const li = document.createElement('li');
        li.className = 'boton boton-animado';
        li.style.animationDelay = `${i * 0.4}s`;

        const a = document.createElement('a');
        a.href = href;

        const img = document.createElement('img');
        img.src = src;
        img.alt = alt;
        img.className = 'btn-img';

        a.appendChild(img);
        li.appendChild(a);
        frag.appendChild(li);
      });
      ul.appendChild(frag);
    })();

    const kiosk = document.querySelector('.kiosk');
    const paneoImg = document.getElementById('paneo-img');

    function configurarPaneoShift() {
      const viewportW = kiosk.clientWidth;
      const imgHeight = parseFloat(getComputedStyle(paneoImg).height);
      const imgW = paneoImg.naturalWidth * (imgHeight / paneoImg.naturalHeight);
      const shift = Math.max(0, Math.round(imgW - viewportW));
      document.documentElement.style.setProperty('--paneo-shift', shift + 'px');

      if (shift === 0) {
        paneoImg.style.animationPlayState = 'paused';
        paneoImg.style.transform = 'translateX(0)';
      } else {
        paneoImg.style.animation = 'none';
        void paneoImg.offsetWidth;
        paneoImg.style.animation = `paneo var(--paneo-duration) linear infinite alternate`;
        paneoImg.style.animationPlayState = 'running';
      }
    }

    if (paneoImg.complete) configurarPaneoShift();
    else paneoImg.addEventListener('load', configurarPaneoShift, { once: true });

    let idleTimer = null;
    const IDLE_MS = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--idle-ms')) || 60000;
    const pantalla = document.getElementById('pantalla-principal');
    const paneoContainer = document.getElementById('paneo-container');

    function bloquearBotones(ms = 2000) {
      document.querySelectorAll('.boton').forEach(b => b.classList.add('bloqueado'));
      setTimeout(() => {
        document.querySelectorAll('.boton').forEach(b => b.classList.remove('bloqueado'));
      }, ms);
    }

    function showPaneo() {
      pantalla.hidden = true;
      paneoContainer.hidden = false;
      configurarPaneoShift();
    }

    function hidePaneo() {
      if (paneoContainer.hidden) return;
      paneoContainer.hidden = true;
      pantalla.hidden = false;
      bloquearBotones(200);
    }

    function resetIdle() {
      if (idleTimer) clearTimeout(idleTimer);
      if (!paneoContainer.hidden) hidePaneo();
      idleTimer = setTimeout(showPaneo, IDLE_MS);
    }

    ['pointerdown','click','keydown','touchstart','wheel'].forEach(ev=>{
      document.addEventListener(ev, resetIdle, { passive: true });
    });
    resetIdle();
  </script>
</body>
</html>
